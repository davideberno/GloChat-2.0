(this["webpackJsonpglo-chat-2.0"]=this["webpackJsonpglo-chat-2.0"]||[]).push([[0],{129:function(e,a,t){e.exports=t(198)},138:function(e,a,t){},158:function(e,a,t){},159:function(e,a,t){},160:function(e,a,t){},161:function(e,a,t){},162:function(e,a,t){},163:function(e,a,t){},164:function(e,a,t){},165:function(e,a,t){},195:function(e,a){},198:function(e,a,t){"use strict";t.r(a);var n,r=t(0),c=t.n(r),o=t(41),i=t(7),l=t(10),u=t.n(l),s=(t(138),t(32)),m=t(20),g=t(42),E=t.n(g),f=t(254),h=t(26),d=Object(h.a)([function(e){return e.socket}],(function(e){return e.currentSocket})),p=function(e){return e.translation},b=Object(h.a)([p],(function(e){return e.language})),v=Object(h.a)([p],(function(e){return e.on})),O={SET_CURRENT_USER:"SET_CURRENT_USER"},N={SET_CURRENT_ROOM:"SET_CURRENT_ROOM"},j={SET_CURRENT_LANGUAGE:"SET_CURRENT_LANGUAGE",TOOGLE_TRANSLATION:"TOOGLE_TRANSLATION"},y=function(e){return{type:j.SET_CURRENT_LANGUAGE,payload:e}},T=t(256),S=t(244),k=t(238),C=t(260),R=t(43),_=t.n(R),U=t(49),w=t(236),x=t(237),A=t(253),G=t(235),L=function(){return c.a.createElement(U.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",c.a.createElement(G.a,{color:"inherit",href:"https://github.com/davideberno"},"Davide Bernocchi")," ",(new Date).getFullYear(),".")},I=Object(w.a)((function(e){return{paper:{marginTop:e.spacing(4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.primary.main,width:e.spacing(7),height:e.spacing(7)},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),M=function(){var e=I(),a=Object(i.c)(d),t=Object(i.c)(b),n=Object(r.useState)(""),o=Object(m.a)(n,2),l=o[0],u=o[1],g=Object(r.useState)(""),h=Object(m.a)(g,2),p=h[0],v=h[1],j=Object(r.useState)(""),R=Object(m.a)(j,2),w=R[0],G=R[1],M=Object(i.b)(),B=Object(s.g)().roomId,z=Object(s.f)();Object(r.useEffect)((function(){B&&v(B)}),[B]);return c.a.createElement(x.a,{component:"main",maxWidth:"xs"},c.a.createElement(k.a,null),c.a.createElement("div",{className:e.paper},c.a.createElement(T.a,{className:e.avatar},c.a.createElement(_.a,null)),c.a.createElement(U.a,{component:"h1",variant:"h5"},"Join room"),c.a.createElement("form",{className:e.form,onSubmit:function(e){e.preventDefault(),E.a.post("/user",{userName:l,roomName:p,language:t,socketId:a.id}).then((function(e){var t=e.data,n=t.userName,r=t.roomName,c=t.language,o=t.error;o?G(o):(M(function(e){return{type:O.SET_CURRENT_USER,payload:e}}(n)),M(y(c)),M(function(e){return{type:N.SET_CURRENT_ROOM,payload:e}}(r)),a.emit("join",{userName:n,roomName:r}),z.push("/chat/".concat(r)))})).catch((function(e){return console.log(e)}))}},w?c.a.createElement(f.a,{severity:"warning"},w):null,c.a.createElement(C.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Username",autoFocus:!0,value:l,onChange:function(e){return u(e.target.value)}}),c.a.createElement(C.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Choose room name",value:p,onChange:function(e){return v(e.target.value)}}),c.a.createElement(U.a,{variant:"subtitle1",gutterBottom:!0},"Or generate one :"),p?null:c.a.createElement(S.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:function(e){return function(e){e.preventDefault();var a=Math.floor(Math.random()*Math.pow(10,6)).toString();v(a)}(e)}},"Generate"),c.a.createElement(S.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"Join"))),c.a.createElement(A.a,{mt:4},c.a.createElement(L,null)))},B=(t(158),function(){var e=Object(i.c)(d),a=Object(r.useState)(""),t=Object(m.a)(a,2),n=t[0],o=t[1];return Object(r.useEffect)((function(){e.on("isTyping",(function(e){o(e),setTimeout((function(){o("")}),2e3)}))}),[e]),n?c.a.createElement("span",{className:"is-typing-allert"},"".concat(n," is typing...")):null}),z=Object(h.a)([function(e){return e.user}],(function(e){return e.userName})),W=Object(h.a)([function(e){return e.room}],(function(e){return e.roomName})),D=(t(159),function(){var e=Object(i.c)(d),a=Object(i.c)(z),t=Object(i.c)(b),n=Object(i.c)(W),o=Object(r.useState)(""),l=Object(m.a)(o,2),u=l[0],s=l[1];Object(r.useEffect)((function(){return document.addEventListener("keydown",g),function(){document.removeEventListener("keydown",g)}}));var g=function(e){"Enter"===e.key&&(e.preventDefault(),E())},E=function(){u&&(e.emit("message",{userName:a,language:t,roomName:n,text:u}),s(""))};return c.a.createElement("form",{className:"message-form"},c.a.createElement(B,null),c.a.createElement("input",{id:"message",name:"message",placeholder:"Type a message...",value:u,onChange:function(t){e.emit("isTyping",{userName:a,roomName:n}),s(t.target.value)}}),c.a.createElement(S.a,{onClick:E},"Send"))}),K=t(113),F=(t(160),function(e){var a=e.msg,t=e.userName;return c.a.createElement("div",{className:"message-container ".concat(t===a.userName?"container-outgoing":"container-incoming")},t!==a.userName?c.a.createElement("div",{className:"sender-username"},a.userName):null,c.a.createElement("div",{className:"message ".concat(t===a.userName?"outgoing":"incoming")},a.text),a.translatedText?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"sender-username"},"Translation:"),c.a.createElement("div",{className:"message translatedText ".concat(t===a.userName?"outgoing":"incoming")},a.translatedText)):null)}),J=(t(161),function(e){var a=e.messages;return Object(r.useEffect)((function(){n.scrollIntoView({behavior:"smooth"})}),[a]),c.a.createElement("div",{className:"dummy-div-scroll",ref:function(e){n=e}})}),H=(t(162),function(){var e=Object(i.c)(d),a=Object(i.c)(z),t=Object(r.useState)([]),n=Object(m.a)(t,2),o=n[0],l=n[1];return Object(r.useEffect)((function(){e.on("message",(function(e){l((function(a){return[].concat(Object(K.a)(a),[e])}))}))}),[e]),c.a.createElement("div",{className:"messages-container"},c.a.createElement("div",{className:"messages"},o.map((function(e,t){return c.a.createElement(F,{key:t,msg:e,userName:a})})),c.a.createElement(J,{messages:o})))}),P=t(243),q=t(201),Y=t(246),V=t(245),X=(t(163),Object(w.a)((function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper},avatar:{color:"white",backgroundColor:e.palette.primary.main}}}))),Z=function(){var e=X(),a=Object(i.c)(d),t=Object(r.useState)([]),n=Object(m.a)(t,2),o=n[0],l=n[1];return Object(r.useEffect)((function(){a.on("roomUsers",(function(e){l(e)}))}),[a]),c.a.createElement("div",{className:"users"},c.a.createElement(U.a,{component:"h1",variant:"h5"},"Users:"),c.a.createElement(P.a,{dense:!0,className:e.root},o.map((function(a,t){return c.a.createElement(q.a,{key:t,button:!0},c.a.createElement(V.a,null,c.a.createElement(T.a,{className:e.avatar},a.userName[0].toUpperCase())),c.a.createElement(Y.a,{primary:a.userName,className:"username-label"}))}))))},Q={Afrikaans:"af",Albanian:"sq",Amharic:"am",Arabic:"ar",Armenian:"hy",Azerbaijani:"az",Basque:"eu",Belarusian:"be",Bengali:"bn",Bosnian:"bs",Bulgarian:"bg",Catalan:"ca",Cebuano:"ceb",Chinese:"zh",Corsican:"co",Croatian:"hr",Czech:"cs",Danish:"da",Dutch:"nl",English:"en",Esperanto:"eo",Estonian:"et",Finnish:"fi",French:"fr",Frisian:"fy",Galician:"gl",Georgian:"ka",German:"de",Greek:"el",Gujarati:"gu",Creole:"ht",Hausa:"ha",Hawaiian:"haw",Hebrew:"he",Hindi:"hi",Hmong:"hmn",Hungarian:"hu",Icelandic:"is",Igbo:"ig",Indonesian:"id",Irish:"ga",Italian:"it",Japanese:"ja",Javanese:"jv",Kannada:"kn",Kazakh:"kk",Khmer:"km",Korean:"ko",Kurdish:"ku",Kyrgyz:"ky",Lao:"lo",Latin:"la",Latvian:"lv",Lithuanian:"lt",Luxembourgish:"lb",Macedonian:"mk",Malagasy:"mg",Malay:"ms",Malayalam:"ml",Maltese:"mt",Maori:"mi",Marathi:"mr",Mongolian:"mn",Burmese:"my",Nepali:"ne",Norwegian:"no",Chichewa:"ny",Pashto:"ps",Persian:"fa",Polish:"pl",Portuguese:"pt",Punjabi:"pa",Romanian:"ro",Russian:"ru",Samoan:"sm",Gaelic:"gd",Serbian:"sr",Sesotho:"st",Shona:"sn",Sindhi:"sd",Sinhalese:"si",Slovak:"sk",Slovenian:"sl",Somali:"so",Spanish:"es",Sundanese:"su",Swahili:"sw",Swedish:"sv",Filipino:"tl",Tajik:"tg",Tamil:"ta",Telugu:"te",Thai:"th",Turkish:"tr",Ukrainian:"uk",Urdu:"ur",Uzbek:"uz",Vietnamese:"vi",Welsh:"cy",Xhosa:"xh",Yiddish:"yi",Yoruba:"yo",Zulu:"zu"},$=t(255),ee=t(247),ae=t(242),te=t(252),ne=Object(w.a)((function(e){return{formControl:{margin:e.spacing(4),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}})),re=function(){var e=ne(),a=Object(i.b)(),t=Object(i.c)(z),n=Object(i.c)(b),r=Object(i.c)(v);return c.a.createElement(ae.a,{className:e.formControl},c.a.createElement($.a,{id:"language-select"},"Language"),c.a.createElement(te.a,{disabled:!r,labelId:"language-select",value:n,onChange:function(e){console.log(e.target.value),E.a.post("/language",{userName:t,language:e.target.value}).then((function(e){return a(y(e.data.language))})).catch((function(e){return console.log(e)}))}},Object.keys(Q).map((function(e,a){return c.a.createElement(ee.a,{key:a,value:e},e)}))))},ce=t(248),oe=t(259),ie=function(){var e=Object(i.b)(),a=Object(i.c)(z),t=Object(i.c)(v);return c.a.createElement(ce.a,{control:c.a.createElement(oe.a,{checked:t,onChange:function(){E.a.post("translationOn",{userName:a}).then((function(a){return e(function(e){return{type:j.TOOGLE_TRANSLATION,payload:e}}(a.data.translationOn))})).catch((function(e){return console.log(e)}))},color:"primary"}),label:"Translation",labelPlacement:"start"})},le=(t(164),function(){return Object(i.c)(W)?c.a.createElement("div",{className:"chat"},c.a.createElement("div",{className:"chats"},c.a.createElement(Z,null)),c.a.createElement("div",{className:"translation"},c.a.createElement(ie,null),c.a.createElement(re,null)),c.a.createElement("div",{className:"messages"},c.a.createElement(H,null)),c.a.createElement("div",{className:"message-input"},c.a.createElement(D,null))):c.a.createElement(M,null)}),ue=t(249),se=Object(w.a)((function(e){return{paper:{marginTop:e.spacing(4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.primary.main,width:e.spacing(10),height:e.spacing(10)}}})),me=function(){var e=se(),a=Object(s.f)();return c.a.createElement(x.a,{component:"main",maxWidth:"xs"},c.a.createElement(k.a,null),c.a.createElement("div",{className:e.paper},c.a.createElement(T.a,{className:e.avatar},c.a.createElement(_.a,{style:{fontSize:40}})),c.a.createElement(U.a,{component:"h1",variant:"h2",gutterBottom:!0},"GloChat"),c.a.createElement(ue.a,{container:!0,spacing:2},c.a.createElement(ue.a,{item:!0,xs:12},c.a.createElement(S.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:function(){return a.push("/join")}},"Join room")))),c.a.createElement(A.a,{mt:5},c.a.createElement(L,null)))},ge=t(250),Ee=t(251),fe=t(239),he=Object(w.a)((function(e){return{menuButton:{marginRight:e.spacing(1)},title:{flexGrow:1}}})),de=function(){var e=he(),a=Object(s.f)(),t=a.location.pathname,n=Object(i.c)(W);return c.a.createElement("div",{className:e.root},c.a.createElement(ge.a,{position:"static"},c.a.createElement(Ee.a,null,c.a.createElement(fe.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu",onClick:function(){return n?a.push("".concat(t)):a.push("/")}},c.a.createElement(_.a,null)),c.a.createElement(U.a,{variant:"h6",className:e.title},"GloChat"))))},pe=(t(165),function(){var e=Object(i.c)(d);return Object(r.useEffect)((function(){return function(){e.emit("disconnect"),e.off()}})),c.a.createElement(c.a.Fragment,null,c.a.createElement(de,null),c.a.createElement(s.c,null,c.a.createElement(s.a,{exact:!0,path:"/join",component:M}),c.a.createElement(s.a,{exact:!0,path:"/chat/:roomId",component:le}),c.a.createElement(s.a,{path:"/",component:me})))}),be=t(36),ve=t(111),Oe=t.n(ve),Ne=t(27),je={userName:null},ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case O.SET_CURRENT_USER:return Object(Ne.a)({},e,{userName:a.payload});default:return e}},Te={SET_SOCKET:"SET_SOCKET"},Se=t(112),ke={currentSocket:t.n(Se)()("https://glochat2.herokuapp.com/")},Ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case Te.SET_SOCKET:return Object(Ne.a)({},e,{currentSocket:a.payload});default:return e}},Re={language:"English",on:!1},_e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case j.SET_CURRENT_LANGUAGE:return Object(Ne.a)({},e,{language:a.payload});case j.TOOGLE_TRANSLATION:return Object(Ne.a)({},e,{on:a.payload});default:return e}},Ue={roomName:null},we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case N.SET_CURRENT_ROOM:return Object(Ne.a)({},e,{roomName:a.payload});default:return e}},xe=Object(be.c)({user:ye,socket:Ce,translation:_e,room:we}),Ae=[Oe.a],Ge=Object(be.d)(xe,be.a.apply(void 0,Ae));u.a.render(c.a.createElement(i.a,{store:Ge},c.a.createElement(o.a,null,c.a.createElement(pe,null))),document.getElementById("root"))}},[[129,1,2]]]);
//# sourceMappingURL=main.31515158.chunk.js.map